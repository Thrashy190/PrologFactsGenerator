# src/generator/fact_generator.py
class PrologFactGenerator:
    def __init__(self, client, formatter, writer):
        self.client = client
        self.formatter = formatter
        self.writer = writer

    def run(self):

        print("""\033[92m

                                       -                                             
                                     -###+                                           
                                    +######-           -##      --                   
                                   ##########        +###     -##                    
                                  +###########+   -+####-   -###-                    
                                 -##############-######-  +####-                     
                                 -####################  -#####-                      
                           +####+ #######################--++                        
                        +########+ #########################-   -#-                  
                      ############+ -################  +##########+                  
                    +###############+--##############++###########                   
                  -###############################################-                  
                 +#############################################+##+                  
               -##################################################+                  
              +###############+###################++#########+ +#-                   
             #######-#########+#################+                                    
           +#######+-######## ######+#########+   #+                                 
       -+#######+  -#######+  -++### #######-   +###-                                
                  -#######           -######  -######                                
                  #####+      +####   +#####   -#####-                               
                  #####-      #####-  -#####+   -#####-                              
                 -######-     +#####-  +######-  +#####+                             
                 -#######     -######  -+++++++   +#####+                            
                                                                                     
                                                                                     
                                                                                     
    ########- -##-                                                                   
    ##+   +## -+#  +#-###+   -####- -#+  +#-  +#  +###+  -#+##+ -###+                
    ##+   -##--##- ### -##+ ###  ##+ ##- ### -#+ ##- +## -##+--### -##-              
    ##+   -##--##- ##+  ##+-##-  -## -######+##- -###### -##  -#######-              
    ###+++##+ -##- ##+  ##+ ###  ##+  +### ###+ -##- +## -##   ##+ -##-              
    ######+   -##- ##-  ##+  -####-   -##- -##   -###-## -#+    -####                
        \033[0m""")

        print("\033[94m")
        
        print("Obteniendo datos desde la API...")
        data = self.client.fetch_data()
        print(f"Se obtuvieron {len(data)} entradas.")

        print("Formateando a hechos Prolog...")
        facts = self.formatter.format_to_facts(data)
        print(f"Se generaron {len(facts)} hechos.")

        self.writer.write(facts)
        print(f"Hechos guardados en '{self.writer.output_file}'")
